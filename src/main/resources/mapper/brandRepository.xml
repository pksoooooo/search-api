<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD MAPPER 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.musinsa.api.common.mapper.BrandMapper">

    <insert id="saveGoods" parameterType="com.musinsa.api.brand.dto.request.BrandRequestDto">
        INSERT INTO goods (brandName, categoryName, price)
        VALUES (#{brandName}, #{categoryName}, #{price});
    </insert>

    <!--    <insert id="saveGoods" parameterType="com.musinsa.api.common.dto.request.GoodsRequestDto">
            INSERT INTO CATEGORY_TEST
                (brand, top, outer, pants, sneakers, bag, hat, socks, accessory)
            VALUES (#{brand}, #{top}, #{outer}, #{pants}, #{sneakers}, #{bag}, #{hat}, #{socks}, #{accessory})
        </insert>-->

    <update id="updateGoods" parameterType="com.musinsa.api.brand.dto.request.BrandRequestDto">
        UPDATE goods
        <set>
            <if test="brandName != null">brandName=#{brandName},</if>
            <if test="categoryName != null">categoryName=#{categoryName},</if>
            <if test="price != null">price=#{price}</if>
        </set>
        WHERE brandName = #{brandName} AND categoryName = #{categoryName};
    </update>
    <delete id="deleteGoods" parameterType="com.musinsa.api.brand.dto.request.BrandRequestDto">
        DELETE
        FROM goods
        WHERE brandName = #{brandName}
          AND categoryName = #{categoryName};
    </delete>

    <select id="fetchAllCategoryGoodsInfo" resultType="com.musinsa.api.goods.model.Goods">
        SELECT brandname, categoryname, price
        FROM CATEGORY;
    </select>

    <select id="findGoodsFromDB" parameterType="com.musinsa.api.brand.dto.request.BrandRequestDto" resultType="java.lang.Boolean">
        SELECT COUNT(*) > 0
        FROM goods
        WHERE brandName = #{brandName}
          AND categoryName = #{categoryName};
    </select>

</mapper>